{% extends 'core/base.html' %}

{% block content %}
<section class="brxe-section" style="padding-top: 4rem; padding-bottom: 4rem; background-color: #f4f4f4;">
    <div class="brxe-container" style="max-width: 800px; margin: 0 auto;">
        <div style="background: white; padding: 3rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <h1 class="brxe-heading" style="text-align: center; margin-bottom: 1rem; font-size: 2.5rem; color: #002855;">Join Team Dr. Emmanuel N. Musa</h1>
            <p style="text-align: center; margin-bottom: 2rem; font-size: 1.1rem; color: #666;">
                Sign up to join the team today and receive updates from the campaign, learn about volunteer opportunities, and more.
            </p>

            <form action="{% url 'signup' %}" method="POST" style="display: grid; gap: 1.5rem;">
                {% csrf_token %}
                <input type="hidden" name="source" value="signup_page">
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <label for="first_name" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">First Name</label>
                        <input type="text" id="first_name" name="first_name" required style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 4px;">
                    </div>
                    <div>
                        <label for="last_name" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Last Name</label>
                        <input type="text" id="last_name" name="last_name" required style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 4px;">
                    </div>
                </div>

                <div>
                    <label for="email" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Email</label>
                    <input type="email" id="email" name="email" required style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 4px;">
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <label for="mobile_phone" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Mobile Phone</label>
                        <input type="tel" id="mobile_phone" name="mobile_phone" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 4px;">
                    </div>
                    <div>
                        <label for="postal_code" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Postal Code</label>
                        <input type="text" id="postal_code" name="postal_code" style="width: 100%; padding: 0.75rem; border: 1px solid #ccc; border-radius: 4px;">
                    </div>
                </div>

                <div style="display: flex; align-items: flex-start; gap: 0.5rem;">
                    <input type="checkbox" id="consent_sms" name="consent_sms" checked style="margin-top: 0.3rem;">
                    <label for="consent_sms" style="font-size: 0.9rem; color: #666; line-height: 1.4;">
                        By submitting your mobile phone number you are agreeing to receive periodic text messages from this organization. Message and data rates may apply. Text HELP for more information. Text STOP to stop receiving messages.
                    </label>
                </div>

                <button type="submit" class="brxe-button" style="background-color: #002855; color: white; padding: 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; font-size: 1.1rem; width: 100%;">
                    Sign Up
                </button>
            </form>
        </div>
    </div>
</section>

<!-- Add intl-tel-input JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css">
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var input = document.querySelector("#mobile_phone");
        var iti = window.intlTelInput(input, {
            utilsScript: "https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",
            initialCountry: "ng",
            separateDialCode: true,
            preferredCountries: ["ng", "us", "gb"]
        });

        var form = document.querySelector("form");
        form.addEventListener("submit", function(e) {
            var fullNumber = iti.getNumber();
            input.value = fullNumber;
        });
    });
</script>

<style>
    @media (max-width: 600px) {
        .brxe-container form > div { grid-template-columns: 1fr !important; }
    }
    .iti { width: 100%; }
</style>
{% endblock %}
